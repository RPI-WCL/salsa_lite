module salsa.local_fcs.language;

begin_java/*
import java.util.LinkedList;
*/end_java

behavior TokenDirector extends ContinuationDirector {

	begin_java/*
	LinkedList<MessageDirector> message_directors = new LinkedList<MessageDirector>();
	LinkedList<Integer> positions = new LinkedList<Integer>();
	*/end_java

	Object value;

	TokenDirector() {
	}

	ack setValue(Object value) {
		self.value = value;

		begin_java/*
		MessageDirector message_director;
		int position;

		while ((message_director = message_directors.removeFirst()) != null) {
			position = positions.removeFirst();
			Message message = new Message(Message.SIMPLE_MESSAGE, message_director, 0, new Object[]{position, value});
			StageService.sendMessage(message);
		}
		*/end_java
	}

	ack addMessageDirector(MessageDirector message_director, int position) {
		begin_java/*
		if (value == null) {
			message_directors.add(message_director);
			positions.add(position);
		} else {
			Message message = new Message(Message.SIMPLE_MESSAGE, message_director, 0, new Object[]{position, value});
			StageService.sendMessage(message);
		}
		*/end_java
	}

}
